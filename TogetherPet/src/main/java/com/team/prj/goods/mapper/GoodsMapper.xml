<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.team.prj.goods.mapper.GoodsMapper">
	<!-- 전체 조회 -->
	<select id="goodsSelectAll" resultType="com.team.prj.goods.service.GoodsVO">
		select * from goods order by
		<choose>
			<when test="key == 1"> 1 desc </when>
			<when test="key == 2"> 10 desc</when>
			<when test="key == 3"> 5 desc</when>
			<when test="key == 4"> 5</when>
		</choose>
	</select>
	
	<!-- 단건 조회 -->
	<select id="goodsSelectOne"
		resultType="com.team.prj.goods.service.GoodsVO">
		select * from goods where goods_no=#{goodsNo}
	</select>

	<!-- 그룹별 사진 불러오기 -->
	<select id="goodsPhotoList"
		parameterType="com.team.prj.goods.service.GoodsVO"
		resultType="com.team.prj.photo.service.PhotoVO">
		select * from photo where group_no=#{groupNo} and
		name='리스트'
	</select>

	<!-- shop에서 리뷰갯수 -->
	<select id="reviewCount"
		resultType="com.team.prj.review.service.ReviewVO">
		select board_no, count(*) rv_cnt from review where
		category_id='S' group by board_no
	</select>
	<!-- goods 리뷰 리스트 호출 -->
	
	<select id="reviewList"
		resultType="com.team.prj.review.service.ReviewVO">
		select * from review where board_no=#{goodsNo} and
		category_id='S'
	</select>
</mapper>