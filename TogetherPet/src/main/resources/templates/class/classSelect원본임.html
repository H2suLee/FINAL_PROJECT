<!doctype html>
<html xmlns:th="https://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" layout:decorate="~{layout/layout3}">

<head>
<meta charset="UTF-8">


<meta id="_csrf" name="_csrf" th:content="${_csrf.token}" />
<meta id="_csrf_header" name="_csrf_header"
	th:content="${_csrf.headerName}" />  
	
<!--<script src="http://code.jquery.com/jquery-latest.min.js"></script>  -->
<!--<script src="assets/js/jquery-ui.calander.min.js"></script>  -->
<!-- 내가 추가함 예약 캘린더 -->

<title>클래스 자세히보기</title>


<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<!-- <script src="http://code.jquery.com/jquery-3.6.0.min.js"></script> -->
<script src="https://code.jquery.com/ui/1.13.1/jquery-ui.js"></script>
<script>
	//$(document).ready(function() {
	//    $("#datepicker").datepicker();
	//});
	
	$(document).ready(function(){
						var jb = jQuery.noConflict();
						//달력
						jb(function() {
							jb('.datepicker').datepicker(
									{ 	dateFormat : "yy-mm-dd",
										dayNamesMin : [ '일', '월', '화', '수', '목', '금', '토' ],
										mindate : "-0m",
										maxdate : "+5m"
									})
							
							//jb('.datepicker').datepicker('setdate', 'today');
						})
				});
</script>


<script>
	//$(document).ready(function() {
	//    $("#datepicker").datepicker();
	//});
	$(document).ready(function(){
						var jc = jQuery.noConflict();
						//var logid = "${userId}";
						var token = jc("meta[name='_csrf']").attr("content");
	    				var header = jc("meta[name='_csrf_header']").attr("content");
						
						//달력 Ajax	
						jc('#datepicker').on("change", function() {
								jc("#selectClassListd").empty();
								var maxheadcount = `[[${clas.maxHeadcount}]]` //jc(this).(".maxhd").val(); //이 클래스의 최대인원		
								var params = {"sdate" : jc(this).val(),"no":`[[${clas.classNo}]]` };
								console.log(maxheadcount)
								console.log(params);	    	
								
								jc.ajax({
										url : "classDateOption",
										type:'get',
										data : params,
										success : function(response){
											htmlView(response);
											//console.log('성공');
											
										}
								});
								
								
								function htmlView(list) {
									for (c of list) {
										if(maxheadcount != `${c.all_headcount}`){//name변경 checkedclassoption
											var result = `<div class='oneclassdiv' style='margin-bottom:10px;'>
												<div class='startdiv'>${c.startDt}</div>
												<div class='headcountdiv'> 최대인원 : [[${clas.maxHeadcount}]] / 신청인원 : ${c.allHeadcount}</div>
												<div class='classoptionno'>${c.classOptionNo}</div>
												<div class='ckdiv'><label style='color:#ff385c;'>클래스선택</label><input type='checkbox' class='checkbb' name='classNoPayList' value= '${c.classOptionNo}'  /></div>
											</div>`
					    					//var a = c.class_option_no;	 	    					
					    				 } else {
					    					 var result = `<div class='oneclassdiv' style='margin-bottom:10px;'>
													<div class='startdiv'>${c.startDt}</div>
													<div class='headcountdiv'> 최대인원 : [[${clas.maxHeadcount}]] / 신청인원 :  ${c.allHeadcount}</div>
													<div class='classoptionno'>${c.classOptionNo}</div>
													<div class='inend'>신청마감</div> 
												</div>`
		 
					    				 }

										jc("#selectClassListd").append(result);
									}
								}				
						});
						
						
						
						//장바구니 추가
						jc('#addOrder').on('click', function(){
							if(confirm('해당 클래스를 신청하시겠습니까?')){
								let qty = Number($('#setQty').val());
								
								jc.ajax('ajaxClassOrderInsert', {
									type: 'post',
									data: {qty: qty, userNo:userNo, ClassNo:ClassNo, ClassOptionNo:ClassOptionNo},
									dataType: 'text',
									beforeSend : function(xhr){
										xhr.setRequestHeader(header, token)},
								})
								.done(res => {
									if(confirm(res)){
										jc('#orderCall').submit();
									}
								})
							}
						})
						
						
	});
	
</script>
<link rel="stylesheet" href="assets/css/jquery-ui.css">
<!-- 새로추가 예약달력 css -->
<link rel="stylesheet" href="//code.jquery.com/ui/1.13.1/themes/base/jquery-ui.css">


<script>
	
</script> 




<style>
/*==================#rightDiv==================*/
/*rightDiv*/
#rightConBox {
	width: 96%;
	margin-left: 10px;
	min-height: 540px;
	height: auto;
	box-shadow: 0 0 8px rgba(0, 0, 0, 0.3);
	position: sticky;
	top: 80px;
	border-radius: 10px;
}

#rightConBox div {
	margin: 0 auto;
}
/*달력 width:350px;*/
#datepicker {
	padding-top: 25px;
}
/*클래스옵션목록*/
#selectdateBB {
	width: 350px;
	height: auto;
	border: 1px solid #f0f0f0;
}

#selectClassListd {
	width: 320px;
	min-height: 10px;
	height: auto;
} /*border:1px solid #f0f0f0;*/
.oneclassdiv {
	width: 320px;
	height: auto;
	border: 1px solid #ff385c;
	padding: 10px;
	border-radius: 14px;
} /*border:1px solid #f0f0f0;*/
.startdiv {
	width: 275px;
	font-size: 22px;
}

.enddiv {
	width: 276px;
}

.headcountdiv {
	width: 276px;
}

.classoptionno {
	display: none;
}

.ckdiv {
	width: 276px;
}

.inend {
	color: #ff385c;
}
/*버튼감싸고 있는div*/
#buttonhomec {
	width: 350px;
	display: flex;
	width: 350px;
}

#buttonhomec input[type=button] {
	border: none;
}

#gobasketB {
	width: 119px;
	height: 50px;
	font-size: 20px;
	margin: 10px 30px 0 0;
	boder: 1px solid #ddd;
	background-color: #616060;
	color: #fff;
}

#gopayB {
	width: 200px;
	height: 50px;
	font-size: 20px;
	margin: 10px 0 0 0;
	boder: 1px solid #ddd;
	background-color: #616060;
	color: #fff;
}

<!--
캘린더 --> /* datepicker Style */ .ui-datepicker {
	width: 270px;
	padding: 0;
	display: none;
	border: 0;
	margin-top: 10px;
}

.ui-widget.ui-widget-content {
	width: 350px;
	height: 400px;
	border: 0;
	border-radius: 3px;
	overflow: hidden;
	background: #fff;
	border: 1px solid #f0f0f0;
} /* box-shadow: 0 0 8px rgba(0,0,0,0.3)*/
.ui-datepicker .ui-widget-header {
	height: 90px;
	position: relative;
	padding: 6px 0 36px 0;
	border: 0;
	background: #f7c9d3;
	color: #fff;
	border-radius: 0;
}

.ui-datepicker select.ui-datepicker-month, .ui-datepicker select.ui-datepicker-year
	{
	width: 70px;
	height: 26px;
	line-height: 26px;
	background: rgba(0, 0, 0, 0.15) url(assets/css/images/arrow-button.png)
		100% -27px no-repeat;
	margin: 0 4px;
	padding: 0 6px;
	border: 0;
	border-radius: 3px;
	color: #fff;
	font-size: 13px;
	font-weight: bold;
	box-sizing: border-box;
	-webkit-appearance: none;
	-moz-appearance: none;
	appearance: none; /* �솕�궡�몴 �뾾�븷湲� */
}

.ui-datepicker select.ui-datepicker-month:hover, .ui-datepicker select.ui-datepicker-year:hover
	{
	background: rgba(0, 0, 0, 0.3) url(assets/css/images/arrow-button.png)
		100% -27px no-repeat;
}

.ui-datepicker select::-ms-expand {
	display: none; /* �솕�궡�몴 �뾾�븷湲� for IE10, 11*/
}

.ui-datepicker .ui-datepicker-title {
	line-height: 2.8rem;
	text-align: center;
	margin: 3px 2.3em;
	font-size: 23px;
	font-weight: bold;
	letter-spacing: 0;
}

.ui-datepicker-title .ui-datepicker-year option, .ui-datepicker-title .ui-datepicker-month option
	{
	background: #fff;
	color: #333;
}

.ui-datepicker-title .ui-datepicker-year {
	color: #fff;
}

.ui-datepicker-title .ui-datepicker-month {
	color: #fff;
}

.ui-datepicker .ui-datepicker-calendar {
	width: 340px;
	height: 315px;
	position: relative;
	margin: 0 auto;
}

.ui-datepicker-calendar thead tr {
	position: absolute;
	top: -30px;
	left: 0px;
	right: 0px;
}

.ui-datepicker-calendar thead th {
	float: left;
	display: block;
	padding: 0;
	width: 14.2857%;
	color: #fff;
	font-size: 14px;
	letter-spacing: 1px;
	opacity: 0.6
}

.ui-datepicker .ui-datepicker-prev, .ui-datepicker .ui-datepicker-next {
	position: absolute;
	top: 15px;
	width: 1.8em;
	height: 1.8em;
	text-indent: -9999px;
	cursor: pointer
}

.ui-datepicker .ui-datepicker-prev {
	left: 5px;
}

.ui-datepicker .ui-datepicker-prev.ui-state-hover {
	background: rgba(0, 0, 0, 0.1);
	border: 0;
}

.ui-datepicker .ui-datepicker-prev .ui-icon {
	background: url(assets/css/images/arrow-button.png) 0 0 no-repeat;
}

.ui-datepicker .ui-datepicker-next {
	right: 5px;
}

.ui-datepicker .ui-datepicker-next.ui-state-hover {
	background: rgba(0, 0, 0, 0.1);
	border: 0;
}

.ui-datepicker .ui-datepicker-next .ui-icon {
	background: url(assets/css/images/arrow-button.png) -16px 0 no-repeat;
}

.ui-datepicker .ui-state-default {
	display: block;
	border: 0;
	border-radius: 15px;
	width: 30px;
	height: 30px;
	line-height: 30px;
	padding: 0;
	margin: 4px auto;
	font-size: 15px;
	text-align: center;
	background: #fff;
	font-weight: normal;
	color: #333;
	box-sizing: border-box;
}

.ui-datepicker .ui-state-default.ui-state-hover {
	background: rgba(0, 0, 0, 0.05);
}

.ui-datepicker-today .ui-state-default {
	color: #3f51b5;
	font-weight: bold;
}

.ui-datepicker-current-day .ui-state-default {
	background: #f7c9d3; ! important;
	color: #fff;
	font-weight: bold;
}

.ui-datepicker-buttonpane {
	overflow: hidden;
	border-top: 1px solid #eee;
}

.ui-datepicker-buttonpane button[data-handler="today"] {
	color: #3f51b5;
	opacity: 0.75;
}

.ui-datepicker-buttonpane button[data-handler="hide"] {
	
}

/* ie add Style */
.ui-datepicker td, .ui-datepicker th {
	border: 0
}

.ui-datepicker .ui-datepicker-buttonpane button {
	float: right;
	cursor: pointer;
	width: auto;
	margin: 0.5em 0.2em 0.4em;
	padding: 0.2em 0.6em 0.3em;
	overflow: visible;
}

.ui-datepicker .ui-datepicker-buttonpane button.ui-datepicker-current {
	float: left;
}

.ui-datepicker .ui-datepicker-prev span, .ui-datepicker .ui-datepicker-next span
	{
	display: block;
	position: absolute;
	left: 50%;
	margin-left: -8px;
	top: 50%;
	margin-top: -8px;
}

.ui-corner-all {
	border-radius: 3px;
}

.ui-icon {
	display: block;
	width: 16px;
	height: 16px;
}
</style>


</head>

<body>
	<article layout:fragment="content">

		<br> <br> <br> <br>


		<!--breadcrumbs area start-->
		<div class="breadcrumbs_area breadcrumbs_product">
			<div class="container">
				<div class="row">
					<div class="col-12">
						<div class="breadcrumb_content">
							<ul>
								<li><a href="index.html">home</a></li>
								<li><a href="shop.html">class</a></li>
								<li>Class Details</li>
							</ul>
						</div>
					</div>
				</div>
			</div>
		</div>
		<!--breadcrumbs area end-->

		<!--product details start-->
		<section class="product_details mb-135">
			<div class="container">
				<div class="row">
					<div class="col-lg-6 col-md-6">
						<div class="product_zoom_gallery">
							<div class="zoom_gallery_inner d-flex">
								<div class="zoom_tab_img">
									<a class="zoom_tabimg_list" href="javascript:void(0)"><img
										src="assets/img/product/small-product/product1.png"
										alt="tab-thumb"></a> <a class="zoom_tabimg_list"
										href="javascript:void(0)"><img
										src="assets/img/product/small-product/product2.png"
										alt="tab-thumb"></a> <a class="zoom_tabimg_list"
										href="javascript:void(0)"><img
										src="assets/img/product/small-product/product3.png"
										alt="tab-thumb"></a> <a class="zoom_tabimg_list"
										href="javascript:void(0)"><img
										src="assets/img/product/small-product/product4.png"
										alt="tab-thumb"></a> <a class="zoom_tabimg_list"
										href="javascript:void(0)"><img
										src="assets/img/product/small-product/product1.png"
										alt="tab-thumb"></a> <a class="zoom_tabimg_list"
										href="javascript:void(0)"><img
										src="assets/img/product/small-product/product2.png"
										alt="tab-thumb"></a> <a class="zoom_tabimg_list"
										href="javascript:void(0)"><img
										src="assets/img/product/small-product/product3.png"
										alt="tab-thumb"></a> <a class="zoom_tabimg_list"
										href="javascript:void(0)"><img
										src="assets/img/product/small-product/product4.png"
										alt="tab-thumb"></a>
								</div>
								<div class="product_zoom_main_img">
									<div class="product_zoom_thumb">
										<img data-image="assets/img/product/big-product/product1.png"
											src="assets/img/product/big-product/product1.png" alt="">
									</div>
									<div class="product_zoom_thumb">
										<img data-image="assets/img/product/big-product/product1.png"
											src="assets/img/product/big-product/product1.png" alt="">
									</div>
									<div class="product_zoom_thumb">
										<img data-image="assets/img/product/big-product/product1.png"
											src="assets/img/product/big-product/product1.png" alt="">
									</div>
									<div class="product_zoom_thumb">
										<img data-image="assets/img/product/big-product/product1.png"
											src="assets/img/product/big-product/product1.png" alt="">
									</div>
									<div class="product_zoom_thumb">
										<img data-image="assets/img/product/big-product/product1.png"
											src="assets/img/product/big-product/product1.png" alt="">
									</div>
									<div class="product_zoom_thumb">
										<img data-image="assets/img/product/big-product/product1.png"
											src="assets/img/product/big-product/product1.png" alt="">
									</div>
									<div class="product_zoom_thumb">
										<img data-image="assets/img/product/big-product/product1.png"
											src="assets/img/product/big-product/product1.png" alt="">
									</div>
									<div class="product_zoom_thumb">
										<img data-image="assets/img/product/big-product/product1.png"
											src="assets/img/product/big-product/product1.png" alt="">
									</div>
								</div>
							</div>
						</div>
					</div>
					<div class="col-lg-6 col-md-6">
						<div class="product_d_right">
							<form action="#">
								<h1>[[${clas.name}]]</h1>
								
								<div class="product_ratting_review d-flex align-items-center">
									<div class=" product_ratting">
										<ul class="d-flex">
											<li><a href="#"><i class="ion-ios-star"></i></a></li>
											<li><a href="#"><i class="ion-ios-star"></i></a></li>
											<li><a href="#"><i class="ion-ios-star"></i></a></li>
											<li><a href="#"><i class="ion-ios-star"></i></a></li>
											<li><a href="#"><i class="ion-ios-star"></i></a></li>
										</ul>
									</div>
									<div class="product_review">
										<ul class="d-flex">
											<li>reviews</li>
										</ul>
									</div>
								</div>


								<div class="price_box">
									<span class="current_price">KRW [[${#numbers.formatInteger(clas.price,3,'COMMA')}]]</span>
								</div>
								

								<!-- -------------------예약달력-------------------->
								<div id="rightdiv">
									<div id="rightConBox">
										<div id="datestr" style="display: none;">
											<input type="text" value="" />
										</div>
										<!-- 선택한날짜입력 -->
										<div id="calendardiv">
											<!-- 달력 -->
											<!-- input type="text" id="datepicker"-->
											<div id="datepicker" class="datepicker"></div>
										</div>
										<form method="post" id="payfrm" name="payfrm">
											<div id="selectdateBB" style="margin-top: 10px;">
												<!-- 해당날짜에 선택된 강의옵션목록 -->
												<div style="margin-top: 10px; width: 300px; color: #666;"
													id=>개설 된 클래스</div>
												<div id="selectClassListd" style="margin-top: 10px;">
													
												</div>
												<div id="result999"></div>
											</div>
											<!--  장바구니,결제하기 -> 옵션클래스번호가지고이동  -->
											<!--<div id="buttonhomec"><input type="button" value="장바구니" id="gobasketB" style="border-radius:5px;"/><input type="button" value="클래스 신청하기" id="gopayB" style="border-radius:5px;"/></div -->
										</form>
										<input type="text" id="inputdatebox"
											style="visibility: hidden;" />
									</div>
								</div>
								<!----------------- 예약달력 ------------------>

								<br><br>

								<div class="product_variant">
									<div class="variant_quantity_btn d-flex">
										<div class="pro-qty border">
											<input min="1" max="100" type="text" id="setQty" value="1">
										</div>
										<form id="orderCall" name="orderCall" action="classOrder" method="post">
											<input type="hidden" th:name="${_csrf.parameterName}"
												th:value="${_csrf.token}">
											<!------- 클래스번호 -------->
											<input type="hidden" name="classNo" id="classNo"
												th:value="${clas.classNo}">
											<!------- 유저가선택한 클래스 일정번호 -------
											<input type="hidden" name="classOptionNo" id="classOptionNo"
												th:value="${option.classOptionNo}">->
											<!------- 유저번호 -------->
											<input type="hidden" name="userNo" id="userNo"
												th:value="${session.user.userNo}">
											
											
											<button class="button btn btn-primary" id="addOrder" type="submit">
												<i class="ion-android-add"></i> 클래스 신청하기
											</button>
										</form>
										<a class="wishlist" href="#"><i class="ion-ios-heart"></i></a>
	
									</div>
								</div>
								
								
								
								

								<div class="priduct_social d-flex">
									<span>SHARE: </span>
									<ul>
										<li><a href="#"><i class="ion-social-twitter"></i></a></li>
										<li><a href="#"><i class="ion-social-facebook"></i></a></li>
										<li><a href="#"><i
												class="ion-social-googleplus-outline"></i></a></li>
										<li><a href="#"><i class="ion-social-pinterest"></i></a></li>
										<li><a href="#"><i
												class="ion-social-instagram-outline"></i></a></li>
									</ul>
								</div>
							</form>
						</div>
					</div>
				</div>
			</div>
		</section>
		<!--product details end-->

		<!--product info start-->
		<div class="product_d_info mb-118">
			<div class="container">
				<div class="row">
					<div class="col-12">
						<div class="product_d_inner">
							<div class="product_info_button border-bottom">
								<ul class="nav" role="tablist">
									<li><a class="active" data-toggle="tab" href="#info"
										role="tab" aria-controls="info" aria-selected="false">클래스
											개요</a></li>
									<li><a data-toggle="tab" href="#reviews" role="tab"
										aria-controls="reviews" aria-selected="false">리뷰 </a></li>
									<li><a data-toggle="tab" href="#additional" role="tab"
										aria-controls="additional" aria-selected="false">오시는 길 </a></li>
								</ul>
							</div>
							<div class="tab-content">
								<div class="tab-pane fade show active" id="info" role="tabpanel">
									<div class="product_info_content">
										<p>
											[[${clas.intro}]]
										</p>
										<ul>
											<li>Length: 74cm</li>
											<li>Regular fit</li>
											<li>Notched lapels</li>
											<li>Twin button front fastening</li>
											<li>Front patch pockets; chest pocket</li>
											<li>Internal pockets</li>
										</ul>
									</div>
								</div>
								<div class="tab-pane fade" id="reviews" role="tabpanel">
									<div class="reviews_wrapper">
										<h2>1 review for Donec eu furniture</h2>
										<div class="reviews_comment_box">
											<div class="comment_thmb">
												<img src="assets/img/blog/comment2.jpg" alt="">
											</div>
											<div class="comment_text">
												<div class="reviews_meta">
													<div class="star_rating">
														<ul class="d-flex">
															<li><a href="#"><i class="icon-star"></i></a></li>
															<li><a href="#"><i class="icon-star"></i></a></li>
															<li><a href="#"><i class="icon-star"></i></a></li>
															<li><a href="#"><i class="icon-star"></i></a></li>
															<li><a href="#"><i class="icon-star"></i></a></li>
														</ul>
													</div>
													<p>
														<strong>admin </strong>- September 12, 2018
													</p>
													<span>roadthemes</span>
												</div>
											</div>

										</div>
										<div class="comment_title">
											<h2>Add a review</h2>
											<p>Your email address will not be published. Required
												fields are marked</p>
										</div>
										<div class="product_ratting mb-10">
											<h3>Your rating</h3>
											<ul class="d-flex">
												<li><a href="#"><i class="icon-star"></i></a></li>
												<li><a href="#"><i class="icon-star"></i></a></li>
												<li><a href="#"><i class="icon-star"></i></a></li>
												<li><a href="#"><i class="icon-star"></i></a></li>
												<li><a href="#"><i class="icon-star"></i></a></li>
											</ul>
										</div>
										<div class="product_review_form">
											<form action="#">
												<div class="row">
													<div class="col-12">
														<label for="review_comment">Your review </label>
														<textarea name="comment" id="review_comment"></textarea>
													</div>
													<div class="col-lg-6 col-md-6">
														<label for="author">Name</label> <input id="author"
															type="text">

													</div>
													<div class="col-lg-6 col-md-6">
														<label for="email">Email </label> <input id="email"
															type="text">
													</div>
												</div>
												<button type="submit">Submit</button>
											</form>
										</div>
									</div>
								</div>
								<div class="tab-pane fade" id="tags" role="tabpanel">
									<div class="product_info_content">
										<ul>
											<li>Length: 74cm</li>
											<li>Regular fit</li>
											<li>Notched lapels</li>
											<li>Twin button front fastening</li>
											<li>Front patch pockets; chest pocket</li>
											<li>Internal pockets</li>
										</ul>
									</div>
								</div>
								<div class="tab-pane fade" id="additional" role="tabpanel">
									<div class="product_d_table">
										<form action="#">
											<table>
												<tbody>
													<tr>
														<td class="first_child">Compositions</td>
														<td>Polyester</td>
													</tr>
													<tr>
														<td class="first_child">Styles</td>
														<td>Girly</td>
													</tr>
													<tr>
														<td class="first_child">Properties</td>
														<td>Short Dress</td>
													</tr>
												</tbody>
											</table>
										</form>
									</div>
									<div class="product_info_content">
										<p>Fashion has been creating well-designed collections
											since 2010. The brand offers feminine designs delivering
											stylish separates and statement dresses which have since
										</p>
									</div>
								</div>
								<div class="tab-pane fade" id="tabinfo" role="tabpanel">
									<div class="product_d_table">
										<form action="#">
											<table>
												<tbody>
													<tr>
														<td class="first_child">Compositions</td>
														<td>Polyester</td>
													</tr>
													<tr>
														<td class="first_child">Styles</td>
														<td>Girly</td>
													</tr>
													<tr>
														<td class="first_child">Properties</td>
														<td>Short Dress</td>
													</tr>
												</tbody>
											</table>
										</form>
									</div>
									<div class="product_info_content">
										<p>Fashion has been creating well-designed collections
											since 2010. The brand offers feminine designs delivering
											stylish separates and statement dresses which have since
										</p>
									</div>
								</div>
								<div class="tab-pane fade" id="video" role="tabpanel">
									<div class="product_tab_vidio text-center">
										<iframe width="729" height="410"
											src="https://www.youtube.com/embed/BUWzX78Ye_8"
											allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
											allowfullscreen></iframe>
									</div>
								</div>

							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<!--product info end-->





	</article>

</body>

</html>
