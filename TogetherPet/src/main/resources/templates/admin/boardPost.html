<!DOCTYPE html>
<html xmlns:th="https://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{layout/layout_admin}">
<head>
<meta charset="UTF-8">
<meta id="_csrf" name="_csrf" th:content="${_csrf.token}" />
<meta id="_csrf_header" name="_csrf_header"
	th:content="${_csrf.headerName}" />

<script
	src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

<title>전체 글 조회 - 커뮤니티</title>
<style>

</style>
</head>
<body>
	<article layout:fragment="content">
	
	<script>
		$(document).ready().ready(function(){
			$('#deleteButton').on('click', function(){
				var $checked = $('.table input[type=checkbox]:checked'); 
				console.log($checked.length); // 체크박스 선택 값
				
				if($checked.length < 1) {
					alert('삭제할 항목을 선택해주세요.');
				 	return false;
				}
				var boardNoList = []; 
				
				$.each($checked, function(k, v){
					boardNoList.push($(this).val());
				});
					console.log(boardNoList); // 체크박스 선택 값 / boardNo 못 불러오고있음..
					console.log(boardNoList.join(',')); // 배열을 문자열로 변경
			});
		});
	</script>
	
	
		<br><br>
		<h5 class="fw-bold py-3 mb-4">
			<span class="text-muted ">전체 게시글 조회 / </span> 
			커뮤니티
			</h5>
		<br><br>
		<!-- 커뮤니티 게시글 테이블 -->
		<div class="card">
			<h5 class="card-header"></h5>
			<div class="table-responsive text-nowrap">
				<table class="table">
					<thead>
						<tr>
							<th><input type="checkbox" class="allCheck"></th>
							<th>글 번호</th>
							<th>카테고리</th>
							<th>글 제목</th>
							<th>닉네임</th>
							<th>작성일자</th>
						</tr>
					</thead>
					<tbody class="table-border-bottom-0">
						<tr th:each="b:${pageInfo.list}">
							<td><input type="checkbox" id="ckbox"></td>
							<td th:text="${b.boardNo}"></td>
							<td th:text="${b.category}"></td>
							<td><a th:href="@{/boardSel(boardNo=${b.boardNo})}"
								th:text="${b.title}"></a></td>
							<td th:text="${b.nickname}"></td>
							<td th:text="${b.dt}"></td>     
						</tr>
					</tbody>
				</table>
			</div>
		</div>
		<!-- Table end-->
		<br>
		
		<button type="button" class="btn btn-sm btn-primary" id="deleteButton">삭제</button>
		
		<br> <br>


		<!-- 페이지네이션 -->
		<nav aria-label="Page navigation example">
			<ul class="pagination pagination-info  justify-content-center">
				<li class="page-item disabled" th:if="${pageInfo.isIsFirstPage()}"><span
					class="page-link">«</span></li>
				<li class="page-item"
					th:if="${!pageInfo.isIsFirstPage() && pageInfo.getList().size() > 0}"><a
					class="page-link"
					th:href="|javascript:gopage([[${pageInfo.getPrePage()}]])|"
					rel="prev">«</a></li>
				<li
					th:class="|page-item ${(pageInfo.pageNum eq page) ? 'active': ''} |"
					th:each="page:${pageInfo.navigatepageNums}"><span
					class="page-link" th:if="${pageInfo.pageNum eq page}"
					th:text="${page}"></span> <a class="page-link"
					th:unless="${pageInfo.pageNum eq page}"
					th:href="|javascript:gopage(${page})|" th:text="${page}">{{$page}}</a></li>
				<li class="page-item" th:if="${pageInfo.hasNextPage}"><a
					class="page-link"
					th:href="|javascript:gopage([[${pageInfo.getNextPage()}]])|"
					rel="next">»</a></li>
				<li class="page-item disabled" th:unless="${pageInfo.hasNextPage}"><span
					class="page-link">»</span></li>
			</ul>
		</nav>

		<script>
			function gopage(p) {
				location.href = '/manager/boardPost?pageNum=' + p;
			}
		</script>
		<!-- 페이지네이션 -->
		
		<form name="deleteForm" method="post" action="/admin/delete.do">
			<input type="hidden" name="boardNoList"/>
		</form>
		
		</article>
	</body>
</html>